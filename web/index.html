<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Card Scanner</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üé¥ Pokemon Card Scanner</h1>
        </header>
        
        <div class="upload-section">
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üì∑</div>
                <h2>Upload Card Image</h2>
                <p>Drag & drop or click to browse</p>
                <input type="file" id="imageInput" accept="image/*,.heic,.heif" hidden>
                <div class="upload-buttons">
                    <button class="btn-primary" onclick="document.getElementById('imageInput').click()">
                        Choose Image
                    </button>
                    <button class="btn-primary camera-btn" id="cameraBtn" onclick="openCamera()" style="display: none;">
                        <span class="camera-icon">üì∏</span>
                        Take Photo
                    </button>
                </div>
            </div>
        </div>
        
        <div class="preview-section" id="previewSection" style="display: none;">
            <div class="preview-card">
                <h3>Selected Image</h3>
                <img id="imagePreview" alt="Card preview">
                <p id="fileName" class="file-name"></p>
            </div>
            
            <div class="action-section">
                <button class="btn-scan" id="scanBtn" onclick="scanCard()">
                    <span class="scan-icon">üîç</span>
                    Scan Card
                </button>
                <button class="btn-secondary" onclick="resetUpload()">
                    Choose Different Image
                </button>
            </div>
        </div>
        
        <div class="loading-section" id="loadingSection" style="display: none;">
            <div class="spinner"></div>
            <p>Scanning your Pokemon card...</p>
            <p class="loading-status" id="loadingStatus">Processing image...</p>
        </div>
        
        <div class="results-section" id="resultsSection" style="display: none;">
            <!-- Performance Summary -->
            <div class="result-card summary-card">
                <h3>üìä Scan Summary</h3>
                <div class="summary-grid" id="summaryGrid"></div>
            </div>
            
            <!-- Card Identification -->
            <div class="result-card" id="identificationCard">
                <h3>ü§ñ AI Identification</h3>
                <div id="geminiResult"></div>
            </div>
            
            <!-- TCG Matches -->
            <div class="result-card" id="matchesCard">
                <h3>üéØ Database Matches</h3>
                <div id="tcgMatches"></div>
            </div>
            
            <!-- Actions -->
            <div class="actions-section">
                <button class="btn-primary" onclick="resetUpload()">
                    Scan Another Card
                </button>
            </div>
        </div>
        
        <div class="error-section" id="errorSection" style="display: none;">
            <div class="error-card">
                <h3>‚ùå Error</h3>
                <p id="errorMessage"></p>
                <button class="btn-secondary" onclick="resetUpload()">
                    Try Again
                </button>
            </div>
        </div>
        
        <!-- Camera Modal -->
        <div class="camera-modal" id="cameraModal" style="display: none;">
            <div class="camera-container">
                <div class="camera-header">
                    <h3>Take Photo of Pokemon Card</h3>
                    <button class="close-btn" onclick="closeCamera()">‚úï</button>
                </div>
                <video id="cameraVideo" autoplay playsinline></video>
                <canvas id="cameraCanvas" style="display: none;"></canvas>
                <div class="camera-controls">
                    <button class="btn-capture" onclick="capturePhoto()">
                        <span class="capture-icon">üì∑</span>
                        Capture
                    </button>
                    <button class="btn-secondary" onclick="closeCamera()">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
    </footer>
    
    <script src="script.js"></script>
</body>
</html>
